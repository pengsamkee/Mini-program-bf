"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var interface_1 = require("../../api/app/interface");
var QueryCalories = (function () {
    function QueryCalories() {
        this.data = {
            activeIndex: 0,
            showLoading: false,
            scrollTop: 0,
            curNav: 'A',
            list: null,
            scrollTopId: '',
            queryArr: [],
        };
    }
    QueryCalories.prototype.getCheckNutrientFoodList = function () {
        var that = this;
        interface_1.default.checkNutrientFoodList().then(function (res) {
            that.formatList(res);
        }).catch(function (err) {
            wx.showToast({
                title: '服务器开小差,稍后请重试',
                icon: 'none',
            });
        });
    };
    QueryCalories.prototype.onShow = function () {
        var that = this;
        setTimeout(function () {
            if (that.data.list === null) {
                that.getCheckNutrientFoodList();
            }
        }, 4000);
    };
    QueryCalories.prototype.formatList = function (res) {
        var _this = this;
        var key = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z'];
        var list = {};
        res.map(function (item, index) {
            list[key[index]] = [
                { name: item.efficacyName }
            ].concat(item.foodList);
        });
        this.setData({
            list: list
        }, function () {
            _this.getQueryArr();
        });
    };
    QueryCalories.prototype.getQueryArr = function () {
        var that = this;
        var query = wx.createSelectorQuery();
        for (var index in that.data.list) {
            query.select("#" + index).boundingClientRect();
        }
        query.exec(function (res) {
            res.map(function (i) { return i.top -= 66; });
            that.setData({
                queryArr: res
            });
        });
    };
    QueryCalories.prototype.onReady = function () {
        this.getCheckNutrientFoodList();
    };
    QueryCalories.prototype.goSearchFood = function () {
        wx.navigateTo({
            url: '/checkNutrition/pages/searchFood/index'
        });
    };
    QueryCalories.prototype.scrollToLower = function () {
        var that = this;
        if (this.data.category[this.data.activeIndex].totalPage == 1) {
            return false;
        }
        that.setData({
            showLoading: true
        });
        setTimeout(function () {
            that.setData({
                showLoading: false
            });
        }, 2000);
    };
    QueryCalories.prototype.handleTapCategoryItem = function (e) {
        var idx = e.target.dataset.categoryIndex;
        this.setData({
            activeIndex: idx,
        });
        if (this.data.category.length - idx < 5) {
            this.setData({
                scrollTop: 99999,
            });
        }
    };
    QueryCalories.prototype.goNutritionDetil = function (e) {
        console.log(e.currentTarget.dataset.itemId);
        var id = e.currentTarget.dataset.itemId;
        wx.navigateTo({
            url: "/checkNutrition/pages/nutritionDetail/index?id=" + id
        });
    };
    QueryCalories.prototype.switchRightTab = function (e) {
        var id = e.target.dataset.id;
        console.log(typeof id);
        this.setData({
            scrollTopId: id,
            curNav: id
        });
    };
    QueryCalories.prototype.bindscroll = function (e) {
        var viewItemArr = this.data.queryArr.map(function (item) {
            if (e.detail.scrollTop > item.top) {
                return item.id;
            }
        });
        var str = viewItemArr.join('');
        var curId = str.substr(str.length - 1);
        curId = curId ? curId : 'A';
        this.setData({ curNav: curId });
    };
    QueryCalories.prototype.onTapFoodItem = function (e) {
        var foodId = e.currentTarget.dataset.foodId;
        var foodType = e.currentTarget.dataset.foodType;
        wx.navigateTo({
            url: "../../checkNutrition/pages/nutritionDetail/index?foodId=" + foodId + "&foodType=" + foodType
        });
    };
    return QueryCalories;
}());
Page(new QueryCalories());
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJpbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUNBLHFEQUE4QztBQUk5QztJQUFBO1FBRVMsU0FBSSxHQUFHO1lBQ1osV0FBVyxFQUFDLENBQUM7WUFDYixXQUFXLEVBQUMsS0FBSztZQUNqQixTQUFTLEVBQUMsQ0FBQztZQUNYLE1BQU0sRUFBRSxHQUFHO1lBQ1gsSUFBSSxFQUFDLElBQUk7WUFDVCxXQUFXLEVBQUMsRUFBRTtZQUNkLFFBQVEsRUFBQyxFQUFFO1NBQ1osQ0FBQTtJQThISCxDQUFDO0lBNUhRLGdEQUF3QixHQUEvQjtRQUNFLElBQU0sSUFBSSxHQUFHLElBQUksQ0FBQTtRQUNqQixtQkFBTyxDQUFDLHFCQUFxQixFQUFFLENBQUMsSUFBSSxDQUFDLFVBQUEsR0FBRztZQUN0QyxJQUFJLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxDQUFBO1FBQ3RCLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxVQUFBLEdBQUc7WUFDVixFQUFFLENBQUMsU0FBUyxDQUFDO2dCQUNYLEtBQUssRUFBRSxjQUFjO2dCQUNyQixJQUFJLEVBQUUsTUFBTTthQUNiLENBQUMsQ0FBQztRQUNMLENBQUMsQ0FBQyxDQUFBO0lBQ0osQ0FBQztJQUNNLDhCQUFNLEdBQWI7UUFDRSxJQUFNLElBQUksR0FBRyxJQUFJLENBQUE7UUFDakIsVUFBVSxDQUFDO1lBQ1QsSUFBRyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksS0FBRyxJQUFJLEVBQUM7Z0JBQ3ZCLElBQUksQ0FBQyx3QkFBd0IsRUFBRSxDQUFBO2FBQ2hDO1FBQ0gsQ0FBQyxFQUFDLElBQUksQ0FBQyxDQUFBO0lBQ1QsQ0FBQztJQUVNLGtDQUFVLEdBQWpCLFVBQWtCLEdBQUc7UUFBckIsaUJBY0M7UUFiQyxJQUFNLEdBQUcsR0FBRyxDQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMs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QU0sRUFBRSxLQUFLLEVBQUMsQ0FBQyxDQUFBO0lBQ3pDLENBQUM7SUFFTSxxQ0FBYSxHQUFwQixVQUFxQixDQUFDO1FBQ3BCLElBQU0sTUFBTSxHQUFHLENBQUMsQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQTtRQUM3QyxJQUFNLFFBQVEsR0FBRyxDQUFDLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUE7UUFDakQsRUFBRSxDQUFDLFVBQVUsQ0FBQztZQUNaLEdBQUcsRUFBRSw2REFBMkQsTUFBTSxrQkFBYSxRQUFVO1NBQzlGLENBQUMsQ0FBQTtJQUNKLENBQUM7SUFDSCxvQkFBQztBQUFELENBQUMsQUF4SUQsSUF3SUM7QUFFRCxJQUFJLENBQUMsSUFBSSxhQUFhLEVBQUUsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiXG5pbXBvcnQgcmVxdWVzdCBmcm9tICcuLi8uLi9hcGkvYXBwL2ludGVyZmFjZSc7XG5pbXBvcnQgbGlzdCBmcm9tICcuL2xpc3QnO1xuXG5pbXBvcnQgKiBhcyB3ZWJBUEkgZnJvbSAnLi4vLi4vYXBpL2FwcC9BcHBTZXJ2aWNlJztcbmNsYXNzIFF1ZXJ5Q2Fsb3JpZXMge1xuXG4gIHB1YmxpYyBkYXRhID0ge1xuICAgIGFjdGl2ZUluZGV4OjAsXG4gICAgc2hvd0xvYWRpbmc6ZmFsc2UsXG4gICAgc2Nyb2xsVG9wOjAsXG4gICAgY3VyTmF2OiAnQScsXG4gICAgbGlzdDpudWxsLFxuICAgIHNjcm9sbFRvcElkOicnLFxuICAgIHF1ZXJ5QXJyOltdLFxuICB9XG5cbiAgcHVibGljIGdldENoZWNrTnV0cmllbnRGb29kTGlzdCgpe1xuICAgIGNvbnN0IHRoYXQgPSB0aGlzXG4gICAgcmVxdWVzdC5jaGVja051dHJpZW50Rm9vZExpc3QoKS50aGVuKHJlcz0+e1xuICAgICAgdGhhdC5mb3JtYXRMaXN0KHJlcylcbiAgICB9KS5jYXRjaChlcnI9PntcbiAgICAgIHd4LnNob3dUb2FzdCh7XG4gICAgICAgIHRpdGxlOiAn5pyN5Yqh5Zmo5byA5bCP5beuLOeojeWQjuivt+mHjeivlScsXG4gICAgICAgIGljb246ICdub25lJyxcbiAgICAgIH0pO1xuICAgIH0pXG4gIH1cbiAgcHVibGljIG9uU2hvdygpe1xuICAgIGNvbnN0IHRoYXQgPSB0aGlzXG4gICAgc2V0VGltZW91dCgoKT0+e1xuICAgICAgaWYodGhhdC5kYXRhLmxpc3Q9PT1udWxsKXtcbiAgICAgICAgdGhhdC5nZXRDaGVja051dHJpZW50Rm9vZExpc3QoKVxuICAgICAgfVxuICAgIH0sNDAwMClcbiAgfVxuXG4gIHB1YmxpYyBmb3JtYXRMaXN0KHJlcyl7XG4gICAgY29uc3Qga2V5ID0gWydBJywnQicsJ0MnLCdEJywnRScsJ0YnLCdHJywnSCcsJ0knLCdKJywnSycsJ0wnLCdNJywnTicsJ08nLCdQJywnUScsJ1InLCdTJywnVCcsJ1UnLCdWJywnVycsJ1gnLCdZJywnWiddXG4gICAgbGV0IGxpc3QgPSB7fVxuICAgIHJlcy5tYXAoKGl0ZW0saW5kZXgpPT57XG4gICAgICBsaXN0W2tleVtpbmRleF1dPVtcbiAgICAgICAge25hbWU6aXRlbS5lZmZpY2FjeU5hbWV9LFxuICAgICAgICAuLi5pdGVtLmZvb2RMaXN0XG4gICAgICBdXG4gICAgfSk7XG4gICAgKHRoaXMgYXMgYW55KS5zZXREYXRhKHtcbiAgICAgIGxpc3Q6bGlzdFxuICAgIH0sKCk9PntcbiAgICAgIHRoaXMuZ2V0UXVlcnlBcnIoKVxuICAgIH0pXG4gIH1cblxuICBwdWJsaWMgZ2V0UXVlcnlBcnIoKXtcbiAgICBjb25zdCB0aGF0ID0gdGhpc1xuICAgIGNvbnN0IHF1ZXJ5ID0gd3guY3JlYXRlU2VsZWN0b3JRdWVyeSgpXG4gICAgZm9yIChsZXQgaW5kZXggaW4gdGhhdC5kYXRhLmxpc3Qpe1xuICAgICAgcXVlcnkuc2VsZWN0KGAjJHtpbmRleH1gKS5ib3VuZGluZ0NsaWVudFJlY3QoKVxuICAgIH1cbiAgICBxdWVyeS5leGVjKGZ1bmN0aW9uIChyZXM6YW55KSB7XG4gICAgICByZXMubWFwKCBpID0+IGkudG9wIC09IDY2ICk7XG4gICAgICAodGhhdCBhcyBhbnkpLnNldERhdGEoe1xuICAgICAgICBxdWVyeUFycjogcmVzXG4gICAgICB9KVxuICAgIH0pXG4gIH1cblxuICBwdWJsaWMgb25SZWFkeSgpe1xuICAgIHRoaXMuZ2V0Q2hlY2tOdXRyaWVudEZvb2RMaXN0KClcbiAgfVxuXG4gIHB1YmxpYyBnb1NlYXJjaEZvb2QoKXtcbiAgICB3eC5uYXZpZ2F0ZVRvKHtcbiAgICAgIHVybDonL2NoZWNrTnV0cml0aW9uL3BhZ2VzL3NlYXJjaEZvb2QvaW5kZXgnXG4gICAgfSlcbiAgfVxuXG4gIHB1YmxpYyBzY3JvbGxUb0xvd2VyKCk6YW55e1xuICAgIGNvbnN0IHRoYXQgPSB0aGlzO1xuICAgIGlmICh0aGlzLmRhdGEuY2F0ZWdvcnlbdGhpcy5kYXRhLmFjdGl2ZUluZGV4XS50b3RhbFBhZ2U9PTEpe1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgICh0aGF0IGFzIGFueSkuc2V0RGF0YSh7XG4gICAgICBzaG93TG9hZGluZzp0cnVlXG4gICAgfSlcbiAgICBzZXRUaW1lb3V0KCgpPT57XG4gICAgICAodGhhdCBhcyBhbnkpLnNldERhdGEoe1xuICAgICAgICBzaG93TG9hZGluZzogZmFsc2VcbiAgICAgIH0pXG4gICAgfSwyMDAwKVxuICB9XG4gIHB1YmxpYyBoYW5kbGVUYXBDYXRlZ29yeUl0ZW0oZTphbnkpOnZvaWR7XG4gICAgbGV0IGlkeCA9IGUudGFyZ2V0LmRhdGFzZXQuY2F0ZWdvcnlJbmRleDtcbiAgICAodGhpcyBhcyBhbnkpLnNldERhdGEoe1xuICAgICAgYWN0aXZlSW5kZXg6IGlkeCxcbiAgICB9KVxuICAgIGlmICh0aGlzLmRhdGEuY2F0ZWdvcnkubGVuZ3RoIC0gaWR4IDwgNSl7XG4gICAgICAodGhpcyBhcyBhbnkpLnNldERhdGEoe1xuICAgICAgICBzY3JvbGxUb3A6OTk5OTksXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBnb051dHJpdGlvbkRldGlsKGUpe1xuICAgIGNvbnNvbGUubG9nKGUuY3VycmVudFRhcmdldC5kYXRhc2V0Lml0ZW1JZClcbiAgICBjb25zdCBpZCA9IGUuY3VycmVudFRhcmdldC5kYXRhc2V0Lml0ZW1JZFxuICAgIHd4Lm5hdmlnYXRlVG8oe1xuICAgICAgdXJsOmAvY2hlY2tOdXRyaXRpb24vcGFnZXMvbnV0cml0aW9uRGV0YWlsL2luZGV4P2lkPSR7aWR9YFxuICAgIH0pXG4gIH1cblxuICAvL+eCueWHu+W3puS+pyB0YWIg77yM5Y+z5L6n5YiX6KGo55u45bqU5L2N572u6IGU5YqoIOe9rumhtlxuICBwdWJsaWMgc3dpdGNoUmlnaHRUYWIoZSkge1xuICB2YXIgaWQgPSBlLnRhcmdldC5kYXRhc2V0LmlkO1xuICBjb25zb2xlLmxvZyh0eXBlb2YgaWQpXG4gIHRoaXMuc2V0RGF0YSh7XG4gICAgLy8g5Yqo5oCB5oqK6I635Y+W5Yiw55qEIGlkIOS8oOe7mSBzY3JvbGxUb3BJZFxuICAgIHNjcm9sbFRvcElkOiBpZCxcbiAgICAvLyDlt6bkvqfngrnlh7vnsbvmoLflvI9cbiAgICBjdXJOYXY6IGlkXG4gIH0pXG5cbiAgcHVibGljIGJpbmRzY3JvbGwoZSkge1xuICAgIGNvbnN0IHZpZXdJdGVtQXJyID0gdGhpcy5kYXRhLnF1ZXJ5QXJyLm1hcChpdGVtPT57XG4gICAgICBpZiAoZS5kZXRhaWwuc2Nyb2xsVG9wPml0ZW0udG9wKXtcbiAgICAgICAgcmV0dXJuIGl0ZW0uaWRcbiAgICAgIH1cbiAgICB9KVxuICAgIGNvbnN0IHN0ciA9IHZpZXdJdGVtQXJyLmpvaW4oJycpO1xuICAgIGxldCBjdXJJZCA9IHN0ci5zdWJzdHIoc3RyLmxlbmd0aC0xKTtcbiAgICBjdXJJZCA9IGN1cklkID8gY3VySWQgOiAnQSc7XG4gICAgKHRoaXMgYXMgYW55KS5zZXREYXRhKHsgY3VyTmF2OiBjdXJJZH0pXG4gIH1cblxuICBwdWJsaWMgb25UYXBGb29kSXRlbShlKXtcbiAgICBjb25zdCBmb29kSWQgPSBlLmN1cnJlbnRUYXJnZXQuZGF0YXNldC5mb29kSWRcbiAgICBjb25zdCBmb29kVHlwZSA9IGUuY3VycmVudFRhcmdldC5kYXRhc2V0LmZvb2RUeXBlXG4gICAgd3gubmF2aWdhdGVUbyh7XG4gICAgICB1cmw6IGAuLi8uLi9jaGVja051dHJpdGlvbi9wYWdlcy9udXRyaXRpb25EZXRhaWwvaW5kZXg/Zm9vZElkPSR7Zm9vZElkfSZmb29kVHlwZT0ke2Zvb2RUeXBlfWBcbiAgICB9KVxuICB9XG59XG5cblBhZ2UobmV3IFF1ZXJ5Q2Fsb3JpZXMoKSk7Il19