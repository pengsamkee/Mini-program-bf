"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var list_1 = require("./list");
var app = getApp();
var QueryCalories = (function () {
    function QueryCalories() {
        this.data = {
            activeIndex: 0,
            showLoading: false,
            scrollTop: 0,
            curNav: 'A',
            list: list_1.default,
            scrollTopId: '',
            queryArr: [],
        };
    }
    QueryCalories.prototype.goSearchFood = function () {
        wx.navigateTo({
            url: '/checkNutrition/pages/searchFood/index'
        });
    };
    QueryCalories.prototype.scrollToLower = function () {
        var that = this;
        if (this.data.category[this.data.activeIndex].totalPage == 1) {
            return false;
        }
        that.setData({
            showLoading: true
        });
        setTimeout(function () {
            that.setData({
                showLoading: false
            });
        }, 2000);
    };
    QueryCalories.prototype.handleTapCategoryItem = function (e) {
        var idx = e.target.dataset.categoryIndex;
        this.setData({
            activeIndex: idx,
        });
        if (this.data.category.length - idx < 5) {
            this.setData({
                scrollTop: 99999,
            });
        }
    };
    QueryCalories.prototype.onShow = function () {
    };
    QueryCalories.prototype.goNutritionDetil = function (e) {
        console.log(e.currentTarget.dataset.itemId);
        var id = e.currentTarget.dataset.itemId;
        wx.navigateTo({
            url: "/checkNutrition/pages/nutritionDetail/index?id=" + id
        });
    };
    QueryCalories.prototype.switchRightTab = function (e) {
        var id = e.target.dataset.id;
        console.log(typeof id);
        this.setData({
            scrollTopId: id,
            curNav: id
        });
    };
    QueryCalories.prototype.bindscroll = function (e) {
        var viewItemArr = this.data.queryArr.map(function (item) {
            if (e.detail.scrollTop > item.top) {
                return item.id;
            }
        });
        var str = viewItemArr.join('');
        var curId = str.substr(str.length - 1);
        curId = curId ? curId : 'A';
        this.setData({ curNav: curId });
    };
    QueryCalories.prototype.onReady = function () {
        var that = this;
        var query = wx.createSelectorQuery();
        for (var index in this.data.list) {
            query.select("#" + index).boundingClientRect();
        }
        query.exec(function (res) {
            res.map(function (i) { return i.top -= 66; });
            that.setData({
                queryArr: res
            });
        });
    };
    QueryCalories.prototype.onTapFoodItem = function (e) {
        var foodId = e.currentTarget.dataset.foodId;
        var foodType = e.currentTarget.dataset.foodType;
        wx.navigateTo({
            url: "../../checkNutrition/pages/nutritionDetail/index?foodId=" + foodId + "&foodType=" + foodType
        });
    };
    return QueryCalories;
}());
Page(new QueryCalories());
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJpbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUtBLCtCQUEwQjtBQUMxQixJQUFNLEdBQUcsR0FBRyxNQUFNLEVBQVUsQ0FBQTtBQUc1QjtJQUFBO1FBRVMsU0FBSSxHQUFHO1lBQ1osV0FBVyxFQUFDLENBQUM7WUFDYixXQUFXLEVBQUMsS0FBSztZQUNqQixTQUFTLEVBQUMsQ0FBQztZQUVYLE1BQU0sRUFBRSxHQUFHO1lBQ1gsSUFBSSxFQUFDLGNBQUk7WUFDVCxXQUFXLEVBQUMsRUFBRTtZQUNkLFFBQVEsRUFBQyxFQUFFO1NBRVosQ0FBQTtJQTBGSCxDQUFDO0lBeEZRLG9DQUFZLEdBQW5CO1FBQ0UsRUFBRSxDQUFDLFVBQVUsQ0FBQztZQUNaLEdBQUcsRUFBQyx3Q0FBd0M7U0FDN0MsQ0FBQyxDQUFBO0lBQ0osQ0FBQztJQUVNLHFDQUFhLEdBQXBCO1FBQ0UsSUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDO1FBQ2xCLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQyxTQUFTLElBQUUsQ0FBQyxFQUFDO1lBQ3pELE9BQU8sS0FBSyxDQUFBO1NBQ2I7UUFDQSxJQUFZLENBQUMsT0FBTyxDQUFDO1lBQ3BCLFdBQVcsRUFBQyxJQUFJO1NBQ2pCLENBQUMsQ0FBQTtRQUNGLFVBQVUsQ0FBQztZQUNSLElBQVksQ0FBQyxPQUFPLENBQUM7Z0JBQ3BCLFdBQVcsRUFBRSxLQUFLO2FBQ25CLENBQUMsQ0FBQTtRQUNKLENBQUMsRUFBQyxJQUFJLENBQUMsQ0FBQTtJQUNULENBQUM7SUFDTSw2Q0FBcUIsR0FBNUIsVUFBNkIsQ0FBSztRQUNoQyxJQUFJLEdBQUcsR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUM7UUFDeEMsSUFBWSxDQUFDLE9BQU8sQ0FBQztZQUNwQixXQUFXLEVB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QWEsUUFBVTtTQUM5RixDQUFDLENBQUE7SUFDSixDQUFDO0lBQ0gsb0JBQUM7QUFBRCxDQUFDLEFBdEdELElBc0dDO0FBRUQsSUFBSSxDQUFDLElBQUksYUFBYSxFQUFFLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IElNeUFwcCB9IGZyb20gJy4uLy4uL2FwcCdcbmltcG9ydCB7IFVwZGF0ZVVzZXJQcm9maWxlUmVxIH0gZnJvbSBcIi4uLy4uL2FwaS9hcHAvQXBwU2VydmljZU9ianNcIlxuaW1wb3J0ICogYXMgZ2xvYmFsRW51bSBmcm9tICcuLi8uLi9hcGkvR2xvYmFsRW51bSdcbmltcG9ydCAqIGFzIG1vbWVudCBmcm9tICdtb21lbnQnO1xuaW1wb3J0IHJlcXVlc3QgZnJvbSAnLi4vLi4vYXBpL2FwcC9pbnRlcmZhY2UnO1xuaW1wb3J0IGxpc3QgZnJvbSAnLi9saXN0JztcbmNvbnN0IGFwcCA9IGdldEFwcDxJTXlBcHA+KClcblxuaW1wb3J0ICogYXMgd2ViQVBJIGZyb20gJy4uLy4uL2FwaS9hcHAvQXBwU2VydmljZSc7XG5jbGFzcyBRdWVyeUNhbG9yaWVzIHtcblxuICBwdWJsaWMgZGF0YSA9IHtcbiAgICBhY3RpdmVJbmRleDowLFxuICAgIHNob3dMb2FkaW5nOmZhbHNlLFxuICAgIHNjcm9sbFRvcDowLFxuICAgIC8vIOW3puS+p+eCueWHu+exu+agt+W8j1xuICAgIGN1ck5hdjogJ0EnLFxuICAgIGxpc3Q6bGlzdCxcbiAgICBzY3JvbGxUb3BJZDonJyxcbiAgICBxdWVyeUFycjpbXSxcblxuICB9XG5cbiAgcHVibGljIGdvU2VhcmNoRm9vZCgpe1xuICAgIHd4Lm5hdmlnYXRlVG8oe1xuICAgICAgdXJsOicvY2hlY2tOdXRyaXRpb24vcGFnZXMvc2VhcmNoRm9vZC9pbmRleCdcbiAgICB9KVxuICB9XG5cbiAgcHVibGljIHNjcm9sbFRvTG93ZXIoKTphbnl7XG4gICAgY29uc3QgdGhhdCA9IHRoaXM7XG4gICAgaWYgKHRoaXMuZGF0YS5jYXRlZ29yeVt0aGlzLmRhdGEuYWN0aXZlSW5kZXhdLnRvdGFsUGFnZT09MSl7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgKHRoYXQgYXMgYW55KS5zZXREYXRhKHtcbiAgICAgIHNob3dMb2FkaW5nOnRydWVcbiAgICB9KVxuICAgIHNldFRpbWVvdXQoKCk9PntcbiAgICAgICh0aGF0IGFzIGFueSkuc2V0RGF0YSh7XG4gICAgICAgIHNob3dMb2FkaW5nOiBmYWxzZVxuICAgICAgfSlcbiAgICB9LDIwMDApXG4gIH1cbiAgcHVibGljIGhhbmRsZVRhcENhdGVnb3J5SXRlbShlOmFueSk6dm9pZHtcbiAgICBsZXQgaWR4ID0gZS50YXJnZXQuZGF0YXNldC5jYXRlZ29yeUluZGV4O1xuICAgICh0aGlzIGFzIGFueSkuc2V0RGF0YSh7XG4gICAgICBhY3RpdmVJbmRleDogaWR4LFxuICAgIH0pXG4gICAgaWYgKHRoaXMuZGF0YS5jYXRlZ29yeS5sZW5ndGggLSBpZHggPCA1KXtcbiAgICAgICh0aGlzIGFzIGFueSkuc2V0RGF0YSh7XG4gICAgICAgIHNjcm9sbFRvcDo5OTk5OSxcbiAgICAgIH0pXG4gICAgfVxuICB9XG4gIHB1YmxpYyBvblNob3coKSB7XG5cbiAgfVxuICBwdWJsaWMgZ29OdXRyaXRpb25EZXRpbChlKXtcbiAgICBjb25zb2xlLmxvZyhlLmN1cnJlbnRUYXJnZXQuZGF0YXNldC5pdGVtSWQpXG4gICAgY29uc3QgaWQgPSBlLmN1cnJlbnRUYXJnZXQuZGF0YXNldC5pdGVtSWRcbiAgICB3eC5uYXZpZ2F0ZVRvKHtcbiAgICAgIHVybDpgL2NoZWNrTnV0cml0aW9uL3BhZ2VzL251dHJpdGlvbkRldGFpbC9pbmRleD9pZD0ke2lkfWBcbiAgICB9KVxuICB9XG5cblxuXG5cbiAgLy/ngrnlh7vlt6bkvqcgdGFiIO+8jOWPs+S+p+WIl+ihqOebuOW6lOS9jee9ruiBlOWKqCDnva7pobZcbiAgcHVibGljIHN3aXRjaFJpZ2h0VGFiKGUpIHtcbiAgdmFyIGlkID0gZS50YXJnZXQuZGF0YXNldC5pZDtcbiAgY29uc29sZS5sb2codHlwZW9mIGlkKVxuICB0aGlzLnNldERhdGEoe1xuICAgIC8vIOWKqOaAgeaKiuiOt+WPluWIsOeahCBpZCDkvKDnu5kgc2Nyb2xsVG9wSWRcbiAgICBzY3JvbGxUb3BJZDogaWQsXG4gICAgLy8g5bem5L6n54K55Ye757G75qC35byPXG4gICAgY3VyTmF2OiBpZFxuICB9KVxuXG4gIHB1YmxpYyBiaW5kc2Nyb2xsKGUpIHtcbiAgICBjb25zdCB2aWV3SXRlbUFyciA9IHRoaXMuZGF0YS5xdWVyeUFyci5tYXAoaXRlbT0+e1xuICAgICAgaWYgKGUuZGV0YWlsLnNjcm9sbFRvcD5pdGVtLnRvcCl7XG4gICAgICAgIHJldHVybiBpdGVtLmlkXG4gICAgICB9XG4gICAgfSlcbiAgICBjb25zdCBzdHIgPSB2aWV3SXRlbUFyci5qb2luKCcnKTtcbiAgICBsZXQgY3VySWQgPSBzdHIuc3Vic3RyKHN0ci5sZW5ndGgtMSk7XG4gICAgY3VySWQgPSBjdXJJZCA/IGN1cklkIDogJ0EnO1xuICAgICh0aGlzIGFzIGFueSkuc2V0RGF0YSh7IGN1ck5hdjogY3VySWR9KVxuICB9XG5cbiAgcHVibGljIG9uUmVhZHkoKXtcbiAgICBjb25zdCB0aGF0ID0gdGhpc1xuICAgIGNvbnN0IHF1ZXJ5ID0gd3guY3JlYXRlU2VsZWN0b3JRdWVyeSgpXG4gICAgZm9yIChsZXQgaW5kZXggaW4gdGhpcy5kYXRhLmxpc3Qpe1xuICAgICAgcXVlcnkuc2VsZWN0KGAjJHtpbmRleH1gKS5ib3VuZGluZ0NsaWVudFJlY3QoKVxuICAgIH1cbiAgICBxdWVyeS5leGVjKGZ1bmN0aW9uIChyZXM6YW55KSB7XG4gICAgICByZXMubWFwKCBpID0+IGkudG9wIC09IDY2ICk7XG4gICAgICAodGhhdCBhcyBhbnkpLnNldERhdGEoe1xuICAgICAgICBxdWVyeUFycjogcmVzXG4gICAgICB9KVxuICAgIH0pXG4gIH1cbiAgcHVibGljIG9uVGFwRm9vZEl0ZW0oZSl7XG4gICAgY29uc3QgZm9vZElkID0gZS5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuZm9vZElkXG4gICAgY29uc3QgZm9vZFR5cGUgPSBlLmN1cnJlbnRUYXJnZXQuZGF0YXNldC5mb29kVHlwZVxuICAgIHd4Lm5hdmlnYXRlVG8oe1xuICAgICAgdXJsOiBgLi4vLi4vY2hlY2tOdXRyaXRpb24vcGFnZXMvbnV0cml0aW9uRGV0YWlsL2luZGV4P2Zvb2RJZD0ke2Zvb2RJZH0mZm9vZFR5cGU9JHtmb29kVHlwZX1gXG4gICAgfSlcbiAgfVxufVxuXG5QYWdlKG5ldyBRdWVyeUNhbG9yaWVzKCkpO1xuIl19