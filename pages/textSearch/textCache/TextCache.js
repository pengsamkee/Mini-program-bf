"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var capacity = 15;
var list = [];
function getAllValue() {
    list = [];
    for (var index = 0; index < capacity; index++) {
        var key = "LRU_" + index;
        var jsonString = wx.getStorageSync(key);
        if (jsonString && jsonString !== "") {
            var foodObj = JSON.parse(jsonString);
            list.push(foodObj);
        }
    }
    return list;
}
exports.getAllValue = getAllValue;
function saveAllValue() {
    for (var index = 0; index < list.length; index++) {
        var key = "LRU_" + index;
        var foodObj = list[index];
        var jsonString = JSON.stringify(foodObj);
        wx.setStorageSync(key, jsonString);
    }
}
exports.saveAllValue = saveAllValue;
function setValue(valObj) {
    var foodId = valObj.foodId;
    for (var index = 0; index < list.length; index++) {
        if (foodId === list[index].foodId) {
            list.splice(index, 1);
        }
    }
    if (list.length === capacity) {
        list.pop();
    }
    list.unshift(valObj);
    saveAllValue();
}
exports.setValue = setValue;
function clearAll() {
    for (var index = 0; index < capacity; index++) {
        var key = "LRU_" + index;
        wx.setStorageSync(key, "");
    }
}
exports.clearAll = clearAll;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVGV4dENhY2hlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiVGV4dENhY2hlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQ0UsSUFBTSxRQUFRLEdBQUcsRUFBRSxDQUFDO0FBQ3BCLElBQUksSUFBSSxHQUFHLEVBQUUsQ0FBQztBQUVkLFNBQWdCLFdBQVc7SUFDekIsSUFBSSxHQUFHLEVBQUUsQ0FBQztJQUNWLEtBQUssSUFBSSxLQUFLLEdBQUcsQ0FBQyxFQUFFLEtBQUssR0FBRyxRQUFRLEVBQUUsS0FBSyxFQUFFLEVBQUU7UUFDN0MsSUFBSSxHQUFHLEdBQUcsTUFBTSxHQUFHLEtBQUssQ0FBQztRQUN6QixJQUFJLFVBQVUsR0FBRyxFQUFFLENBQUMsY0FBYyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBRXhDLElBQUksVUFBVSxJQUFJLFVBQVUsS0FBSyxFQUFFLEVBQUM7WUFDbEMsSUFBSSxPQUFPLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsQ0FBQztZQUNyQyxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1NBQ3BCO0tBQ0Y7SUFDRCxPQUFPLElBQUksQ0FBQztBQUNkLENBQUM7QUFaRCxrQ0FZQztBQUdELFNBQWdCLFlBQVk7SUFDMUIsS0FBSyxJQUFJLEtBQUssR0FBRyxDQUFDLEVBQUUsS0FBSyxHQUFHLElBQUksQ0FBQyxNQUFNLEVBQUUsS0FBSyxFQUFFLEVBQUU7UUFDaEQsSUFBSSxHQUFHLEdBQUcsTUFBTSxHQUFHLEtBQUssQ0FBQztRQUN6QixJQUFJLE9BQU8sR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDMUIsSUFBSSxVQUFVLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUN6QyxFQUFFLENBQUMsY0FBYyxDQUFDLEdBQUcsRUFBRSxVQUFVLENBQUMsQ0FBQztLQUNwQztBQUNILENBQUM7QUFQRCxvQ0FPQztBQUdELFNBQWdCLFFBQVEsQ0FBQyxNQUFNO0lBQzdCLElBQUksTUFBTSxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUM7SUFDM0IsS0FBSyxJQUFJLEtBQUssR0FBRyxDQUFDLEVBQUUsS0FBSyxHQUFHLElBQUksQ0FBQyxNQUFNLEVBQUUsS0FBSyxFQUFFLEVBQUM7UUFFL0MsSUFBSSxNQUFNLEtBQUssSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLE1BQU0sRUFBQztZQUNoQyxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssRUFBQyxDQUFDLENBQUMsQ0FBQztTQUN0QjtLQUNGO0lBRUQsSUFBSSxJQUFJLENBQUMsTUFBTSxLQUFLLFFBQVEsRUFBQztRQUMzQixJQUFJLENBQUMsR0FBRyxFQUFFLENBQUM7S0FDWjtJQUNELElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDckIsWUFBWSxFQUFFLENBQUM7QUFDakIsQ0FBQztBQWRELDRCQWNDO0FBRUQsU0FBZ0IsUUFBUTtJQUN0QixLQUFLLElBQUksS0FBSyxHQUFHLENBQUMsRUFBRSxLQUFLLEdBQUcsUUFBUSxFQUFFLEtBQUssRUFBRSxFQUFFO1FBQzdDLElBQUksR0FBRyxHQUFHLE1BQU0sR0FBRyxLQUFLLENBQUM7UUFDekIsRUFBRSxDQUFDLGNBQWMsQ0FBQyxHQUFHLEVBQUUsRUFBRSxDQUFDLENBQUM7S0FDNUI7QUFDSCxDQUFDO0FBTEQsNEJBS0MiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgY29uc3QgY2FwYWNpdHkgPSAxNTtcbiAgdmFyIGxpc3QgPSBbXTtcblxuICBleHBvcnQgZnVuY3Rpb24gZ2V0QWxsVmFsdWUoKSB7XG4gICAgbGlzdCA9IFtdO1xuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBjYXBhY2l0eTsgaW5kZXgrKykge1xuICAgICAgbGV0IGtleSA9IFwiTFJVX1wiICsgaW5kZXg7XG4gICAgICBsZXQganNvblN0cmluZyA9IHd4LmdldFN0b3JhZ2VTeW5jKGtleSk7XG4gICAgICAvL2NvbnZlcnQganNvblN0aW5nIHRvIGFuIG9iamVjdFwiTFJVX1wiXG4gICAgICBpZiAoanNvblN0cmluZyAmJiBqc29uU3RyaW5nICE9PSBcIlwiKXtcbiAgICAgICAgbGV0IGZvb2RPYmogPSBKU09OLnBhcnNlKGpzb25TdHJpbmcpO1xuICAgICAgICBsaXN0LnB1c2goZm9vZE9iaik7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBsaXN0O1xuICB9XG5cbiAgLy9zYXZlIGFsbCB2YWx1ZSB0byBjYWNoZVxuICBleHBvcnQgZnVuY3Rpb24gc2F2ZUFsbFZhbHVlKCkge1xuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBsaXN0Lmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgbGV0IGtleSA9IFwiTFJVX1wiICsgaW5kZXg7XG4gICAgICBsZXQgZm9vZE9iaiA9IGxpc3RbaW5kZXhdO1xuICAgICAgbGV0IGpzb25TdHJpbmcgPSBKU09OLnN0cmluZ2lmeShmb29kT2JqKTtcbiAgICAgIHd4LnNldFN0b3JhZ2VTeW5jKGtleSwganNvblN0cmluZyk7XG4gICAgfVxuICB9XG5cbiAgLy9qdWRlZ2UgdGhlIHVuaXF1ZSBpdGVtIGJ5IGZvb2RJZFxuICBleHBvcnQgZnVuY3Rpb24gc2V0VmFsdWUodmFsT2JqKXtcbiAgICBsZXQgZm9vZElkID0gdmFsT2JqLmZvb2RJZDtcbiAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgbGlzdC5sZW5ndGg7IGluZGV4Kyspe1xuICAgICAgLy9yZW1vdmUgdGhlIG9iaiB3aXRoIHNhbWUga2V5XG4gICAgICBpZiAoZm9vZElkID09PSBsaXN0W2luZGV4XS5mb29kSWQpe1xuICAgICAgICBsaXN0LnNwbGljZShpbmRleCwxKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy9jYWNoZSBmdWxsIGxlbmd0aCBjYXNlLHJlbW92ZSBsYXN0XG4gICAgaWYgKGxpc3QubGVuZ3RoID09PSBjYXBhY2l0eSl7XG4gICAgICBsaXN0LnBvcCgpO1xuICAgIH1cbiAgICBsaXN0LnVuc2hpZnQodmFsT2JqKTtcbiAgICBzYXZlQWxsVmFsdWUoKTtcbiAgfVxuXG4gIGV4cG9ydCBmdW5jdGlvbiBjbGVhckFsbCgpe1xuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBjYXBhY2l0eTsgaW5kZXgrKykge1xuICAgICAgbGV0IGtleSA9IFwiTFJVX1wiICsgaW5kZXg7XG4gICAgICB3eC5zZXRTdG9yYWdlU3luYyhrZXksIFwiXCIpO1xuICAgIH1cbiAgfSJdfQ==